<!--
	ng-model = create a variable/object in the global scope and bind it to the value of its input field
-->

<!--
	All of this code is controlled by the lobbiesController
-->

<div class="card meetings cf">
	<div class="textintro">
		<h1>Add a Lobby</h1>
		<p>Use the form below to create a lobby</p>
	</div>
	<form name="add-form" ng-submit="addLobby()" ng-hide="activeLobby" novalidate>
		<div class="form-group">
			<input type="text" name="title" class="form-control" placeholder="Title of your lobby" ng-model="lobby.title" ng-required="true">
		</div>
		<button type="submit" class="btn"><i class="fa fa-plus-circle"></i> Create</button>
	</form>
</div>
<div class="text-center">
	<button type="button" class="btn btn-danger" ng-show="activeLobby" ng-click="removeLobby(index)"><i class="fa fa-trash"></i>  Remove Lobby</button>
</div>

<div class="notification" ng-if="notification == currentUser">
	<span>Someone has requested to join your lobby</span>
</div>

<div class="panel panel-default">
	<div class="panel-heading"></div>
	<div class="panel-body">
	<div class="clearfix"></div>
		<div class="card" ng-repeat="(key, lobby) in lobbies"><!-- key is the hash created by firebase to identify the lobby under "lobbies" and lobby is the list of lobby data -->
		<div class="clearfix"></div>
			<span class="text">{{ lobby.title }}</span>
			<div class="clearfix"></div>
			<div ng-if="key == hash" style="position: absolute; right: 0; top: 50%; transform: translate(0, -50%);">
				<span>You've joined this lobby</span>
			</div>
			<div ng-if="key != hash" style="position: absolute; right: 0; top: 50%; transform: translate(0, -50%);">
				<button class="btn btn-warning btn-sm" ng-click="open(key, lobby)"><i class="fa fa-user-plus"></i></button>
			</div>
			<div class="clearfix"></div>
		</div>
	</div>
</div>